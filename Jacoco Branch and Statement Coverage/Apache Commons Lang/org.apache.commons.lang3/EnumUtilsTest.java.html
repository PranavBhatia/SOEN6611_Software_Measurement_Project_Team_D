<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EnumUtilsTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">commons_lang3$Jacoco_Report.exec</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.lang3</a> &gt; <span class="el_source">EnumUtilsTest.java</span></div><h1>EnumUtilsTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
package org.apache.commons.lang3;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertNull;
import static org.junit.jupiter.api.Assertions.assertThrows;
import static org.junit.jupiter.api.Assertions.assertTrue;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.EnumSet;
import java.util.List;
import java.util.Map;

import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

/**
 *
 */
<span class="fc" id="L39">public class EnumUtilsTest {</span>

    @Test
    public void testConstructable() {
        // enforce public constructor
<span class="fc" id="L44">        new EnumUtils();</span>
<span class="fc" id="L45">    }</span>

    @Test
    public void test_getEnumMap() {
<span class="fc" id="L49">        final Map&lt;String, Traffic&gt; test = EnumUtils.getEnumMap(Traffic.class);</span>
<span class="fc" id="L50">        assertEquals(&quot;{RED=RED, AMBER=AMBER, GREEN=GREEN}&quot;, test.toString(), &quot;getEnumMap not created correctly&quot;);</span>
<span class="fc" id="L51">        assertEquals(3, test.size());</span>
<span class="fc" id="L52">        assertTrue(test.containsKey(&quot;RED&quot;));</span>
<span class="fc" id="L53">        assertEquals(Traffic.RED, test.get(&quot;RED&quot;));</span>
<span class="fc" id="L54">        assertTrue(test.containsKey(&quot;AMBER&quot;));</span>
<span class="fc" id="L55">        assertEquals(Traffic.AMBER, test.get(&quot;AMBER&quot;));</span>
<span class="fc" id="L56">        assertTrue(test.containsKey(&quot;GREEN&quot;));</span>
<span class="fc" id="L57">        assertEquals(Traffic.GREEN, test.get(&quot;GREEN&quot;));</span>
<span class="fc" id="L58">        assertFalse(test.containsKey(&quot;PURPLE&quot;));</span>
<span class="fc" id="L59">    }</span>

    @Test
    public void test_getEnumList() {
<span class="fc" id="L63">        final List&lt;Traffic&gt; test = EnumUtils.getEnumList(Traffic.class);</span>
<span class="fc" id="L64">        assertEquals(3, test.size());</span>
<span class="fc" id="L65">        assertEquals(Traffic.RED, test.get(0));</span>
<span class="fc" id="L66">        assertEquals(Traffic.AMBER, test.get(1));</span>
<span class="fc" id="L67">        assertEquals(Traffic.GREEN, test.get(2));</span>
<span class="fc" id="L68">    }</span>

    @Test
    public void test_isValidEnum() {
<span class="fc" id="L72">        assertTrue(EnumUtils.isValidEnum(Traffic.class, &quot;RED&quot;));</span>
<span class="fc" id="L73">        assertTrue(EnumUtils.isValidEnum(Traffic.class, &quot;AMBER&quot;));</span>
<span class="fc" id="L74">        assertTrue(EnumUtils.isValidEnum(Traffic.class, &quot;GREEN&quot;));</span>
<span class="fc" id="L75">        assertFalse(EnumUtils.isValidEnum(Traffic.class, &quot;PURPLE&quot;));</span>
<span class="fc" id="L76">        assertFalse(EnumUtils.isValidEnum(Traffic.class, null));</span>
<span class="fc" id="L77">    }</span>

    @Test
    public void test_isValidEnum_nullClass() {
<span class="pc" id="L81">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.isValidEnum(null, &quot;PURPLE&quot;));</span>
<span class="fc" id="L82">    }</span>

    @Test
    public void test_isValidEnumIgnoreCase() {
<span class="fc" id="L86">        assertTrue(EnumUtils.isValidEnumIgnoreCase(Traffic.class, &quot;red&quot;));</span>
<span class="fc" id="L87">        assertTrue(EnumUtils.isValidEnumIgnoreCase(Traffic.class, &quot;Amber&quot;));</span>
<span class="fc" id="L88">        assertTrue(EnumUtils.isValidEnumIgnoreCase(Traffic.class, &quot;grEEn&quot;));</span>
<span class="fc" id="L89">        assertFalse(EnumUtils.isValidEnumIgnoreCase(Traffic.class, &quot;purple&quot;));</span>
<span class="fc" id="L90">        assertFalse(EnumUtils.isValidEnumIgnoreCase(Traffic.class, null));</span>
<span class="fc" id="L91">    }</span>

    @Test
    public void test_isValidEnumIgnoreCase_nullClass() {
<span class="pc" id="L95">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.isValidEnumIgnoreCase(null, &quot;PURPLE&quot;));</span>
<span class="fc" id="L96">    }</span>

    @Test
    public void test_getEnum() {
<span class="fc" id="L100">        assertEquals(Traffic.RED, EnumUtils.getEnum(Traffic.class, &quot;RED&quot;));</span>
<span class="fc" id="L101">        assertEquals(Traffic.AMBER, EnumUtils.getEnum(Traffic.class, &quot;AMBER&quot;));</span>
<span class="fc" id="L102">        assertEquals(Traffic.GREEN, EnumUtils.getEnum(Traffic.class, &quot;GREEN&quot;));</span>
<span class="fc" id="L103">        assertNull(EnumUtils.getEnum(Traffic.class, &quot;PURPLE&quot;));</span>
<span class="fc" id="L104">        assertNull(EnumUtils.getEnum(Traffic.class, null));</span>
<span class="fc" id="L105">    }</span>

    @Test
    public void test_getEnum_nonEnumClass() {
<span class="fc" id="L109">        final Class rawType = Object.class;</span>
<span class="fc" id="L110">        assertNull(EnumUtils.getEnum(rawType, &quot;rawType&quot;));</span>
<span class="fc" id="L111">    }</span>

    @Test
    public void test_getEnum_nullClass() {
<span class="pc" id="L115">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.getEnum((Class&lt;Traffic&gt;) null, &quot;PURPLE&quot;));</span>
<span class="fc" id="L116">    }</span>

    @Test
    public void test_getEnumIgnoreCase() {
<span class="fc" id="L120">        assertEquals(Traffic.RED, EnumUtils.getEnumIgnoreCase(Traffic.class, &quot;red&quot;));</span>
<span class="fc" id="L121">        assertEquals(Traffic.AMBER, EnumUtils.getEnumIgnoreCase(Traffic.class, &quot;Amber&quot;));</span>
<span class="fc" id="L122">        assertEquals(Traffic.GREEN, EnumUtils.getEnumIgnoreCase(Traffic.class, &quot;grEEn&quot;));</span>
<span class="fc" id="L123">        assertNull(EnumUtils.getEnumIgnoreCase(Traffic.class, &quot;purple&quot;));</span>
<span class="fc" id="L124">        assertNull(EnumUtils.getEnumIgnoreCase(Traffic.class, null));</span>
<span class="fc" id="L125">    }</span>

    @Test
    public void test_getEnumIgnoreCase_nonEnumClass() {
<span class="fc" id="L129">        final Class rawType = Object.class;</span>
<span class="fc" id="L130">        assertNull(EnumUtils.getEnumIgnoreCase(rawType, &quot;rawType&quot;));</span>
<span class="fc" id="L131">    }</span>

    @Test
    public void test_getEnumIgnoreCase_nullClass() {
<span class="pc" id="L135">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.getEnumIgnoreCase((Class&lt;Traffic&gt;) null, &quot;PURPLE&quot;));</span>
<span class="fc" id="L136">    }</span>

    @Test
    public void test_generateBitVector_nullClass() {
<span class="pc" id="L140">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.generateBitVector(null, EnumSet.of(Traffic.RED)));</span>
<span class="fc" id="L141">    }</span>

    @Test
    public void test_generateBitVectors_nullClass() {
<span class="pc" id="L145">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.generateBitVectors(null, EnumSet.of(Traffic.RED)));</span>
<span class="fc" id="L146">    }</span>

    @Test
    public void test_generateBitVector_nullIterable() {
<span class="fc" id="L150">        assertThrows(NullPointerException.class,</span>
<span class="nc" id="L151">                () -&gt; EnumUtils.generateBitVector(Traffic.class, (Iterable&lt;Traffic&gt;) null));</span>
<span class="fc" id="L152">    }</span>

    @Test
    public void test_generateBitVectors_nullIterable() {
<span class="pc" id="L156">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.generateBitVectors(null, (Iterable&lt;Traffic&gt;) null));</span>
<span class="fc" id="L157">    }</span>

    @Test
    public void test_generateBitVector_nullElement() {
<span class="fc" id="L161">        assertThrows(IllegalArgumentException.class,</span>
<span class="nc" id="L162">                () -&gt; EnumUtils.generateBitVector(Traffic.class, Arrays.asList(Traffic.RED, null)));</span>
<span class="fc" id="L163">    }</span>

    @Test
    public void test_generateBitVectors_nullElement() {
<span class="fc" id="L167">        assertThrows(IllegalArgumentException.class,</span>
<span class="nc" id="L168">                () -&gt; EnumUtils.generateBitVectors(Traffic.class, Arrays.asList(Traffic.RED, null)));</span>
<span class="fc" id="L169">    }</span>

    @Test
    public void test_generateBitVector_nullClassWithArray() {
<span class="pc" id="L173">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.generateBitVector(null, Traffic.RED));</span>
<span class="fc" id="L174">    }</span>

    @Test
    public void test_generateBitVectors_nullClassWithArray() {
<span class="pc" id="L178">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.generateBitVectors(null, Traffic.RED));</span>
<span class="fc" id="L179">    }</span>

    @Test
    public void test_generateBitVector_nullArray() {
<span class="pc" id="L183">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.generateBitVector(Traffic.class, (Traffic[]) null));</span>
<span class="fc" id="L184">    }</span>

    @Test
    public void test_generateBitVectors_nullArray() {
<span class="pc" id="L188">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.generateBitVectors(Traffic.class, (Traffic[]) null));</span>
<span class="fc" id="L189">    }</span>

    @Test
    public void test_generateBitVector_nullArrayElement() {
<span class="fc" id="L193">        assertThrows(IllegalArgumentException.class,</span>
<span class="nc" id="L194">                () -&gt; EnumUtils.generateBitVector(Traffic.class, Traffic.RED, null));</span>
<span class="fc" id="L195">    }</span>

    @Test
    public void test_generateBitVectors_nullArrayElement() {
<span class="fc" id="L199">        assertThrows(IllegalArgumentException.class,</span>
<span class="nc" id="L200">                () -&gt; EnumUtils.generateBitVectors(Traffic.class, Traffic.RED, null));</span>
<span class="fc" id="L201">    }</span>

    @Test
    public void test_generateBitVector_longClass() {
<span class="fc" id="L205">        assertThrows(IllegalArgumentException.class,</span>
<span class="nc" id="L206">                () -&gt; EnumUtils.generateBitVector(TooMany.class, EnumSet.of(TooMany.A1)));</span>
<span class="fc" id="L207">    }</span>

    @Test
    public void test_generateBitVector_longClassWithArray() {
<span class="pc" id="L211">        assertThrows(IllegalArgumentException.class, () -&gt; EnumUtils.generateBitVector(TooMany.class, TooMany.A1));</span>
<span class="fc" id="L212">    }</span>

    @SuppressWarnings(&quot;unchecked&quot;)
    @Test
    public void test_generateBitVector_nonEnumClass() {
        @SuppressWarnings(&quot;rawtypes&quot;)
        final
<span class="fc" id="L219">        Class rawType = Object.class;</span>
        @SuppressWarnings(&quot;rawtypes&quot;)
        final
<span class="fc" id="L222">        List rawList = new ArrayList();</span>
<span class="pc" id="L223">        assertThrows(IllegalArgumentException.class, () -&gt; EnumUtils.generateBitVector(rawType, rawList));</span>
<span class="fc" id="L224">    }</span>

    @SuppressWarnings(&quot;unchecked&quot;)
    @Test
    public void test_generateBitVectors_nonEnumClass() {
        @SuppressWarnings(&quot;rawtypes&quot;)
        final
<span class="fc" id="L231">        Class rawType = Object.class;</span>
        @SuppressWarnings(&quot;rawtypes&quot;)
        final
<span class="fc" id="L234">        List rawList = new ArrayList();</span>
<span class="pc" id="L235">        assertThrows(IllegalArgumentException.class, () -&gt; EnumUtils.generateBitVectors(rawType, rawList));</span>
<span class="fc" id="L236">    }</span>

    @SuppressWarnings(&quot;unchecked&quot;)
    @Test
    public void test_generateBitVector_nonEnumClassWithArray() {
        @SuppressWarnings(&quot;rawtypes&quot;)
        final
<span class="fc" id="L243">        Class rawType = Object.class;</span>
<span class="pc" id="L244">        assertThrows(IllegalArgumentException.class, () -&gt; EnumUtils.generateBitVector(rawType));</span>
<span class="fc" id="L245">    }</span>

    @SuppressWarnings(&quot;unchecked&quot;)
    @Test
    public void test_generateBitVectors_nonEnumClassWithArray() {
        @SuppressWarnings(&quot;rawtypes&quot;)
        final
<span class="fc" id="L252">        Class rawType = Object.class;</span>
<span class="pc" id="L253">        assertThrows(IllegalArgumentException.class, () -&gt; EnumUtils.generateBitVectors(rawType));</span>
<span class="fc" id="L254">    }</span>

    @Test
    public void test_generateBitVector() {
<span class="fc" id="L258">        assertEquals(0L, EnumUtils.generateBitVector(Traffic.class, EnumSet.noneOf(Traffic.class)));</span>
<span class="fc" id="L259">        assertEquals(1L, EnumUtils.generateBitVector(Traffic.class, EnumSet.of(Traffic.RED)));</span>
<span class="fc" id="L260">        assertEquals(2L, EnumUtils.generateBitVector(Traffic.class, EnumSet.of(Traffic.AMBER)));</span>
<span class="fc" id="L261">        assertEquals(4L, EnumUtils.generateBitVector(Traffic.class, EnumSet.of(Traffic.GREEN)));</span>
<span class="fc" id="L262">        assertEquals(3L, EnumUtils.generateBitVector(Traffic.class, EnumSet.of(Traffic.RED, Traffic.AMBER)));</span>
<span class="fc" id="L263">        assertEquals(5L, EnumUtils.generateBitVector(Traffic.class, EnumSet.of(Traffic.RED, Traffic.GREEN)));</span>
<span class="fc" id="L264">        assertEquals(6L, EnumUtils.generateBitVector(Traffic.class, EnumSet.of(Traffic.AMBER, Traffic.GREEN)));</span>
<span class="fc" id="L265">        assertEquals(7L, EnumUtils.generateBitVector(Traffic.class, EnumSet.of(Traffic.RED, Traffic.AMBER, Traffic.GREEN)));</span>

        // 64 values Enum (to test whether no int&lt;-&gt;long jdk convertion issue exists)
<span class="fc" id="L268">        assertEquals((1L &lt;&lt; 31), EnumUtils.generateBitVector(Enum64.class, EnumSet.of(Enum64.A31)));</span>
<span class="fc" id="L269">        assertEquals((1L &lt;&lt; 32), EnumUtils.generateBitVector(Enum64.class, EnumSet.of(Enum64.A32)));</span>
<span class="fc" id="L270">        assertEquals((1L &lt;&lt; 63), EnumUtils.generateBitVector(Enum64.class, EnumSet.of(Enum64.A63)));</span>
<span class="fc" id="L271">        assertEquals(Long.MIN_VALUE, EnumUtils.generateBitVector(Enum64.class, EnumSet.of(Enum64.A63)));</span>
<span class="fc" id="L272">    }</span>

    @Test
    public void test_generateBitVectors() {
<span class="fc" id="L276">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, EnumSet.noneOf(Traffic.class)), 0L);</span>
<span class="fc" id="L277">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, EnumSet.of(Traffic.RED)), 1L);</span>
<span class="fc" id="L278">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, EnumSet.of(Traffic.AMBER)), 2L);</span>
<span class="fc" id="L279">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, EnumSet.of(Traffic.GREEN)), 4L);</span>
<span class="fc" id="L280">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, EnumSet.of(Traffic.RED, Traffic.AMBER)), 3L);</span>
<span class="fc" id="L281">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, EnumSet.of(Traffic.RED, Traffic.GREEN)), 5L);</span>
<span class="fc" id="L282">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, EnumSet.of(Traffic.AMBER, Traffic.GREEN)), 6L);</span>
<span class="fc" id="L283">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, EnumSet.of(Traffic.RED, Traffic.AMBER, Traffic.GREEN)), 7L);</span>

        // 64 values Enum (to test whether no int&lt;-&gt;long jdk convertion issue exists)
<span class="fc" id="L286">        assertArrayEquals(EnumUtils.generateBitVectors(Enum64.class, EnumSet.of(Enum64.A31)), (1L &lt;&lt; 31));</span>
<span class="fc" id="L287">        assertArrayEquals(EnumUtils.generateBitVectors(Enum64.class, EnumSet.of(Enum64.A32)), (1L &lt;&lt; 32));</span>
<span class="fc" id="L288">        assertArrayEquals(EnumUtils.generateBitVectors(Enum64.class, EnumSet.of(Enum64.A63)), (1L &lt;&lt; 63));</span>
<span class="fc" id="L289">        assertArrayEquals(EnumUtils.generateBitVectors(Enum64.class, EnumSet.of(Enum64.A63)), Long.MIN_VALUE);</span>

        // More than 64 values Enum
<span class="fc" id="L292">        assertArrayEquals(EnumUtils.generateBitVectors(TooMany.class, EnumSet.of(TooMany.M2)), 1L, 0L);</span>
<span class="fc" id="L293">        assertArrayEquals(EnumUtils.generateBitVectors(TooMany.class, EnumSet.of(TooMany.L2, TooMany.M2)), 1L, (1L &lt;&lt; 63));</span>
<span class="fc" id="L294">    }</span>

    @Test
    public void test_generateBitVectorFromArray() {
<span class="fc" id="L298">        assertEquals(0L, EnumUtils.generateBitVector(Traffic.class));</span>
<span class="fc" id="L299">        assertEquals(1L, EnumUtils.generateBitVector(Traffic.class, Traffic.RED));</span>
<span class="fc" id="L300">        assertEquals(2L, EnumUtils.generateBitVector(Traffic.class, Traffic.AMBER));</span>
<span class="fc" id="L301">        assertEquals(4L, EnumUtils.generateBitVector(Traffic.class, Traffic.GREEN));</span>
<span class="fc" id="L302">        assertEquals(3L, EnumUtils.generateBitVector(Traffic.class, Traffic.RED, Traffic.AMBER));</span>
<span class="fc" id="L303">        assertEquals(5L, EnumUtils.generateBitVector(Traffic.class, Traffic.RED, Traffic.GREEN));</span>
<span class="fc" id="L304">        assertEquals(6L, EnumUtils.generateBitVector(Traffic.class, Traffic.AMBER, Traffic.GREEN));</span>
<span class="fc" id="L305">        assertEquals(7L, EnumUtils.generateBitVector(Traffic.class, Traffic.RED, Traffic.AMBER, Traffic.GREEN));</span>
        //gracefully handles duplicates:
<span class="fc" id="L307">        assertEquals(7L, EnumUtils.generateBitVector(Traffic.class, Traffic.RED, Traffic.AMBER, Traffic.GREEN, Traffic.GREEN));</span>

        // 64 values Enum (to test whether no int&lt;-&gt;long jdk convertion issue exists)
<span class="fc" id="L310">        assertEquals((1L &lt;&lt; 31), EnumUtils.generateBitVector(Enum64.class, Enum64.A31));</span>
<span class="fc" id="L311">        assertEquals((1L &lt;&lt; 32), EnumUtils.generateBitVector(Enum64.class, Enum64.A32));</span>
<span class="fc" id="L312">        assertEquals((1L &lt;&lt; 63), EnumUtils.generateBitVector(Enum64.class, Enum64.A63));</span>
<span class="fc" id="L313">        assertEquals(Long.MIN_VALUE, EnumUtils.generateBitVector(Enum64.class, Enum64.A63));</span>
<span class="fc" id="L314">    }</span>

    @Test
    public void test_generateBitVectorsFromArray() {
<span class="fc" id="L318">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class), 0L);</span>
<span class="fc" id="L319">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, Traffic.RED), 1L);</span>
<span class="fc" id="L320">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, Traffic.AMBER), 2L);</span>
<span class="fc" id="L321">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, Traffic.GREEN), 4L);</span>
<span class="fc" id="L322">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, Traffic.RED, Traffic.AMBER), 3L);</span>
<span class="fc" id="L323">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, Traffic.RED, Traffic.GREEN), 5L);</span>
<span class="fc" id="L324">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, Traffic.AMBER, Traffic.GREEN), 6L);</span>
<span class="fc" id="L325">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, Traffic.RED, Traffic.AMBER, Traffic.GREEN), 7L);</span>
        //gracefully handles duplicates:
<span class="fc" id="L327">        assertArrayEquals(EnumUtils.generateBitVectors(Traffic.class, Traffic.RED, Traffic.AMBER, Traffic.GREEN, Traffic.GREEN), 7L);</span>

        // 64 values Enum (to test whether no int&lt;-&gt;long jdk convertion issue exists)
<span class="fc" id="L330">        assertArrayEquals(EnumUtils.generateBitVectors(Enum64.class, Enum64.A31), (1L &lt;&lt; 31));</span>
<span class="fc" id="L331">        assertArrayEquals(EnumUtils.generateBitVectors(Enum64.class, Enum64.A32), (1L &lt;&lt; 32));</span>
<span class="fc" id="L332">        assertArrayEquals(EnumUtils.generateBitVectors(Enum64.class, Enum64.A63), (1L &lt;&lt; 63));</span>
<span class="fc" id="L333">        assertArrayEquals(EnumUtils.generateBitVectors(Enum64.class, Enum64.A63), Long.MIN_VALUE);</span>

        // More than 64 values Enum
<span class="fc" id="L336">        assertArrayEquals(EnumUtils.generateBitVectors(TooMany.class, TooMany.M2), 1L, 0L);</span>
<span class="fc" id="L337">        assertArrayEquals(EnumUtils.generateBitVectors(TooMany.class, TooMany.L2, TooMany.M2), 1L, (1L &lt;&lt; 63));</span>

<span class="fc" id="L339">    }</span>

    private void assertArrayEquals(final long[] actual, final long... expected) {
<span class="fc" id="L342">        Assertions.assertArrayEquals(expected, actual);</span>
<span class="fc" id="L343">    }</span>

    @Test
    public void test_processBitVector_nullClass() {
<span class="fc" id="L347">        final Class&lt;Traffic&gt; empty = null;</span>
<span class="pc" id="L348">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.processBitVector(empty, 0L));</span>
<span class="fc" id="L349">    }</span>

    @Test
    public void test_processBitVectors_nullClass() {
<span class="fc" id="L353">        final Class&lt;Traffic&gt; empty = null;</span>
<span class="pc" id="L354">        assertThrows(NullPointerException.class, () -&gt; EnumUtils.processBitVectors(empty, 0L));</span>
<span class="fc" id="L355">    }</span>

    @Test
    public void test_processBitVector() {
<span class="fc" id="L359">        assertEquals(EnumSet.noneOf(Traffic.class), EnumUtils.processBitVector(Traffic.class, 0L));</span>
<span class="fc" id="L360">        assertEquals(EnumSet.of(Traffic.RED), EnumUtils.processBitVector(Traffic.class, 1L));</span>
<span class="fc" id="L361">        assertEquals(EnumSet.of(Traffic.AMBER), EnumUtils.processBitVector(Traffic.class, 2L));</span>
<span class="fc" id="L362">        assertEquals(EnumSet.of(Traffic.RED, Traffic.AMBER), EnumUtils.processBitVector(Traffic.class, 3L));</span>
<span class="fc" id="L363">        assertEquals(EnumSet.of(Traffic.GREEN), EnumUtils.processBitVector(Traffic.class, 4L));</span>
<span class="fc" id="L364">        assertEquals(EnumSet.of(Traffic.RED, Traffic.GREEN), EnumUtils.processBitVector(Traffic.class, 5L));</span>
<span class="fc" id="L365">        assertEquals(EnumSet.of(Traffic.AMBER, Traffic.GREEN), EnumUtils.processBitVector(Traffic.class, 6L));</span>
<span class="fc" id="L366">        assertEquals(EnumSet.of(Traffic.RED, Traffic.AMBER, Traffic.GREEN), EnumUtils.processBitVector(Traffic.class, 7L));</span>

        // 64 values Enum (to test whether no int&lt;-&gt;long jdk convertion issue exists)
<span class="fc" id="L369">        assertEquals(EnumSet.of(Enum64.A31), EnumUtils.processBitVector(Enum64.class, (1L &lt;&lt; 31)));</span>
<span class="fc" id="L370">        assertEquals(EnumSet.of(Enum64.A32), EnumUtils.processBitVector(Enum64.class, (1L &lt;&lt; 32)));</span>
<span class="fc" id="L371">        assertEquals(EnumSet.of(Enum64.A63), EnumUtils.processBitVector(Enum64.class, (1L &lt;&lt; 63)));</span>
<span class="fc" id="L372">        assertEquals(EnumSet.of(Enum64.A63), EnumUtils.processBitVector(Enum64.class, Long.MIN_VALUE));</span>
<span class="fc" id="L373">    }</span>

    @Test
    public void test_processBitVectors() {
<span class="fc" id="L377">        assertEquals(EnumSet.noneOf(Traffic.class), EnumUtils.processBitVectors(Traffic.class, 0L));</span>
<span class="fc" id="L378">        assertEquals(EnumSet.of(Traffic.RED), EnumUtils.processBitVectors(Traffic.class, 1L));</span>
<span class="fc" id="L379">        assertEquals(EnumSet.of(Traffic.AMBER), EnumUtils.processBitVectors(Traffic.class, 2L));</span>
<span class="fc" id="L380">        assertEquals(EnumSet.of(Traffic.RED, Traffic.AMBER), EnumUtils.processBitVectors(Traffic.class, 3L));</span>
<span class="fc" id="L381">        assertEquals(EnumSet.of(Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 4L));</span>
<span class="fc" id="L382">        assertEquals(EnumSet.of(Traffic.RED, Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 5L));</span>
<span class="fc" id="L383">        assertEquals(EnumSet.of(Traffic.AMBER, Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 6L));</span>
<span class="fc" id="L384">        assertEquals(EnumSet.of(Traffic.RED, Traffic.AMBER, Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 7L));</span>

<span class="fc" id="L386">        assertEquals(EnumSet.noneOf(Traffic.class), EnumUtils.processBitVectors(Traffic.class, 0L, 0L));</span>
<span class="fc" id="L387">        assertEquals(EnumSet.of(Traffic.RED), EnumUtils.processBitVectors(Traffic.class, 0L, 1L));</span>
<span class="fc" id="L388">        assertEquals(EnumSet.of(Traffic.AMBER), EnumUtils.processBitVectors(Traffic.class, 0L, 2L));</span>
<span class="fc" id="L389">        assertEquals(EnumSet.of(Traffic.RED, Traffic.AMBER), EnumUtils.processBitVectors(Traffic.class, 0L, 3L));</span>
<span class="fc" id="L390">        assertEquals(EnumSet.of(Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 0L, 4L));</span>
<span class="fc" id="L391">        assertEquals(EnumSet.of(Traffic.RED, Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 0L, 5L));</span>
<span class="fc" id="L392">        assertEquals(EnumSet.of(Traffic.AMBER, Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 0L, 6L));</span>
<span class="fc" id="L393">        assertEquals(EnumSet.of(Traffic.RED, Traffic.AMBER, Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 0L, 7L));</span>

        // demonstrate tolerance of irrelevant high-order digits:
<span class="fc" id="L396">        assertEquals(EnumSet.noneOf(Traffic.class), EnumUtils.processBitVectors(Traffic.class, 666L, 0L));</span>
<span class="fc" id="L397">        assertEquals(EnumSet.of(Traffic.RED), EnumUtils.processBitVectors(Traffic.class, 666L, 1L));</span>
<span class="fc" id="L398">        assertEquals(EnumSet.of(Traffic.AMBER), EnumUtils.processBitVectors(Traffic.class, 666L, 2L));</span>
<span class="fc" id="L399">        assertEquals(EnumSet.of(Traffic.RED, Traffic.AMBER), EnumUtils.processBitVectors(Traffic.class, 666L, 3L));</span>
<span class="fc" id="L400">        assertEquals(EnumSet.of(Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 666L, 4L));</span>
<span class="fc" id="L401">        assertEquals(EnumSet.of(Traffic.RED, Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 666L, 5L));</span>
<span class="fc" id="L402">        assertEquals(EnumSet.of(Traffic.AMBER, Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 666L, 6L));</span>
<span class="fc" id="L403">        assertEquals(EnumSet.of(Traffic.RED, Traffic.AMBER, Traffic.GREEN), EnumUtils.processBitVectors(Traffic.class, 666L, 7L));</span>

        // 64 values Enum (to test whether no int&lt;-&gt;long jdk convertion issue exists)
<span class="fc" id="L406">        assertEquals(EnumSet.of(Enum64.A31), EnumUtils.processBitVectors(Enum64.class, (1L &lt;&lt; 31)));</span>
<span class="fc" id="L407">        assertEquals(EnumSet.of(Enum64.A32), EnumUtils.processBitVectors(Enum64.class, (1L &lt;&lt; 32)));</span>
<span class="fc" id="L408">        assertEquals(EnumSet.of(Enum64.A63), EnumUtils.processBitVectors(Enum64.class, (1L &lt;&lt; 63)));</span>
<span class="fc" id="L409">        assertEquals(EnumSet.of(Enum64.A63), EnumUtils.processBitVectors(Enum64.class, Long.MIN_VALUE));</span>
<span class="fc" id="L410">    }</span>

    @Test
    public void test_processBitVector_longClass() {
<span class="pc" id="L414">        assertThrows(IllegalArgumentException.class, () -&gt; EnumUtils.processBitVector(TooMany.class, 0L));</span>
<span class="fc" id="L415">    }</span>

    @Test
    public void test_processBitVectors_longClass() {
<span class="fc" id="L419">        assertEquals(EnumSet.noneOf(TooMany.class), EnumUtils.processBitVectors(TooMany.class, 0L));</span>
<span class="fc" id="L420">        assertEquals(EnumSet.of(TooMany.A), EnumUtils.processBitVectors(TooMany.class, 1L));</span>
<span class="fc" id="L421">        assertEquals(EnumSet.of(TooMany.B), EnumUtils.processBitVectors(TooMany.class, 2L));</span>
<span class="fc" id="L422">        assertEquals(EnumSet.of(TooMany.A, TooMany.B), EnumUtils.processBitVectors(TooMany.class, 3L));</span>
<span class="fc" id="L423">        assertEquals(EnumSet.of(TooMany.C), EnumUtils.processBitVectors(TooMany.class, 4L));</span>
<span class="fc" id="L424">        assertEquals(EnumSet.of(TooMany.A, TooMany.C), EnumUtils.processBitVectors(TooMany.class, 5L));</span>
<span class="fc" id="L425">        assertEquals(EnumSet.of(TooMany.B, TooMany.C), EnumUtils.processBitVectors(TooMany.class, 6L));</span>
<span class="fc" id="L426">        assertEquals(EnumSet.of(TooMany.A, TooMany.B, TooMany.C), EnumUtils.processBitVectors(TooMany.class, 7L));</span>

<span class="fc" id="L428">        assertEquals(EnumSet.noneOf(TooMany.class), EnumUtils.processBitVectors(TooMany.class, 0L, 0L));</span>
<span class="fc" id="L429">        assertEquals(EnumSet.of(TooMany.A), EnumUtils.processBitVectors(TooMany.class, 0L, 1L));</span>
<span class="fc" id="L430">        assertEquals(EnumSet.of(TooMany.B), EnumUtils.processBitVectors(TooMany.class, 0L, 2L));</span>
<span class="fc" id="L431">        assertEquals(EnumSet.of(TooMany.A, TooMany.B), EnumUtils.processBitVectors(TooMany.class, 0L, 3L));</span>
<span class="fc" id="L432">        assertEquals(EnumSet.of(TooMany.C), EnumUtils.processBitVectors(TooMany.class, 0L, 4L));</span>
<span class="fc" id="L433">        assertEquals(EnumSet.of(TooMany.A, TooMany.C), EnumUtils.processBitVectors(TooMany.class, 0L, 5L));</span>
<span class="fc" id="L434">        assertEquals(EnumSet.of(TooMany.B, TooMany.C), EnumUtils.processBitVectors(TooMany.class, 0L, 6L));</span>
<span class="fc" id="L435">        assertEquals(EnumSet.of(TooMany.A, TooMany.B, TooMany.C), EnumUtils.processBitVectors(TooMany.class, 0L, 7L));</span>
<span class="fc" id="L436">        assertEquals(EnumSet.of(TooMany.A, TooMany.B, TooMany.C), EnumUtils.processBitVectors(TooMany.class, 0L, 7L));</span>

<span class="fc" id="L438">        assertEquals(EnumSet.of(TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 1L, 0L));</span>
<span class="fc" id="L439">        assertEquals(EnumSet.of(TooMany.A, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 1L, 1L));</span>
<span class="fc" id="L440">        assertEquals(EnumSet.of(TooMany.B, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 1L, 2L));</span>
<span class="fc" id="L441">        assertEquals(EnumSet.of(TooMany.A, TooMany.B, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 1L, 3L));</span>
<span class="fc" id="L442">        assertEquals(EnumSet.of(TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 1L, 4L));</span>
<span class="fc" id="L443">        assertEquals(EnumSet.of(TooMany.A, TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 1L, 5L));</span>
<span class="fc" id="L444">        assertEquals(EnumSet.of(TooMany.B, TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 1L, 6L));</span>
<span class="fc" id="L445">        assertEquals(EnumSet.of(TooMany.A, TooMany.B, TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 1L, 7L));</span>
<span class="fc" id="L446">        assertEquals(EnumSet.of(TooMany.A, TooMany.B, TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 1L, 7L));</span>

        // demonstrate tolerance of irrelevant high-order digits:
<span class="fc" id="L449">        assertEquals(EnumSet.of(TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 9L, 0L));</span>
<span class="fc" id="L450">        assertEquals(EnumSet.of(TooMany.A, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 9L, 1L));</span>
<span class="fc" id="L451">        assertEquals(EnumSet.of(TooMany.B, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 9L, 2L));</span>
<span class="fc" id="L452">        assertEquals(EnumSet.of(TooMany.A, TooMany.B, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 9L, 3L));</span>
<span class="fc" id="L453">        assertEquals(EnumSet.of(TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 9L, 4L));</span>
<span class="fc" id="L454">        assertEquals(EnumSet.of(TooMany.A, TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 9L, 5L));</span>
<span class="fc" id="L455">        assertEquals(EnumSet.of(TooMany.B, TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 9L, 6L));</span>
<span class="fc" id="L456">        assertEquals(EnumSet.of(TooMany.A, TooMany.B, TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 9L, 7L));</span>
<span class="fc" id="L457">        assertEquals(EnumSet.of(TooMany.A, TooMany.B, TooMany.C, TooMany.M2), EnumUtils.processBitVectors(TooMany.class, 9L, 7L));</span>
<span class="fc" id="L458">    }</span>

}

<span class="fc" id="L462">enum Traffic {</span>
<span class="fc" id="L463">    RED, AMBER, GREEN</span>
}

<span class="fc" id="L466">enum Enum64 {</span>
<span class="fc" id="L467">    A00, A01, A02, A03, A04, A05, A06, A07, A08, A09, A10, A11, A12, A13, A14, A15,</span>
<span class="fc" id="L468">    A16, A17, A18, A19, A20, A21, A22, A23, A24, A25, A26, A27, A28, A29, A30, A31,</span>
<span class="fc" id="L469">    A32, A33, A34, A35, A36, A37, A38, A39, A40, A41, A42, A43, A44, A45, A46, A47,</span>
<span class="fc" id="L470">    A48, A49, A50, A51, A52, A53, A54, A55, A56, A57, A58, A59, A60, A61, A62, A63</span>
}

<span class="fc" id="L473">enum TooMany {</span>
<span class="fc" id="L474">    A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z,</span>
<span class="fc" id="L475">    A1, B1, C1, D1, E1, F1, G1, H1, I1, J1, K1, L1, M1, N1, O1, P1, Q1, R1, S1, T1,</span>
<span class="fc" id="L476">    U1, V1, W1, X1, Y1, Z1, A2, B2, C2, D2, E2, F2, G2, H2, I2, J2, K2, L2, M2</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>